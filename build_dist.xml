<project default="dist">
	
	<property name="version"   value="3.0.0-004" />
	
	<property name="dest_dir"  value="./dist" />
	<property name="zip_file"  value="${dest_dir}/telosys-cli-${version}.zip" />

	<!-- ============================================================================== -->
	<target name="dist" >
		
		<echo message="Create dir : ${dest_dir} " />
		<mkdir dir="${dest_dir}"/>
		
		<echo message="Copy files" />
		<!--		
		<copy file="./target/telosys-cli-${version}.jar" tofile="${dest_dir}/telosys-cli-${version}.jar"/>
		<copy file="./tt.bat" tofile="${dest_dir}/tt.bat"/>
		<copy file="./tl.bat" tofile="${dest_dir}/tl.bat"/>
		-->
		<copy file="./tl.bat.txt" tofile="./tl.bat"/>
		<replace file="tl.bat" token="${VER}" value="${version}"/>
		
		<copy file="./tt.bat.txt" tofile="./tt.bat"/>
		<replace file="tt.bat" token="${VER}" value="${version}"/>
		
		<copy file="./tt.sh.txt" tofile="./tt.sh"/>
		<replace file="tt.sh"  token="${VER}" value="${version}"/>
		
		<copy file="./target/telosys-cli-${version}.jar" tofile="./telosys-cli-${version}.jar"/>
		
		<echo message="Zip file : ${zip_file}  " />
		<zip destfile="${zip_file}"  >	
			<fileset dir="." includes="telosys-cli-${version}.jar"/>
			<fileset dir="." includes="telosys-cli.cfg"/>
			<fileset dir="." includes="README.TXT"/>
			<fileset dir="." includes="tt.bat"/>
			<fileset dir="." includes="tl.bat"/>
			<fileset dir="." includes="tt.sh"/>
		</zip>
		<delete file="./telosys-cli-${version}.jar"/>
		
	</target>

</project>
